# erp-ns-client-python

## Installation
1. Install package (for example via Poetry)
```shell
poetry add erp-ns-client-python
```

## Usage
1. First import necessary message classes from `erp_ns_client_python` to build 
   a correct `protobuf` messages (along to `postman`s importing)
```python
from erp_ns_client_python import (
    EmailMessage,
    SlackMessage,
    SlackMessageParameters,
    email_postman,
    slack_postman,
)
```
2. Build slack/email message:
```python
# slack
params = SlackMessageParameters(username="bot", as_user=True, attachments=[])
msg = SlackMessage(
   message_parameters=params,
   channel="U01MX44EG2W",  # slack channel/user id like 'U91MX44EG2W'
   text=f"{datetime.datetime.now()}: some message here"
)

# email
email = EmailMessage(
   to="some@email.com", subject="subject", text="text", cc="another@email.com"  # ...
)
setattr(email, "from", "some@email.com")  # trick for autogenerated protobuf classes
```
3. Send it to `evrone-erp-ns` 
```python
# slack
slack_postman.send(message=msg)
# email
email_postman.send(message=email)
```